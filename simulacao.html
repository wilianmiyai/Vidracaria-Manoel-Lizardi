<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Quebra de Vidros 3D - Vidra√ßaria</title>
    <link rel="stylesheet" href="simulacao.css">
</head>
<body>
    <div id="container">
        <canvas id="canvas3d"></canvas>
        
        <!-- Painel de Controles -->
        <div id="controls-panel">
            <h2>üî¨ Simulador de Vidros</h2>
            
            <a href="index.html" class="btn-back">‚Üê</a>
            
            <div class="control-group">
                <label for="glass-type">Tipo de Vidro:</label>
                <!-- Select nativo (desktop) -->
                <select id="glass-type" class="desktop-select">
                    <option value="temperado">Temperado</option>
                    <option value="laminado">Laminado</option>
                    <option value="fantasia">Fantasia</option>
                    <option value="espelho">Espelho</option>
                </select>
                <!-- Dropdown customizado (mobile) - abre pra cima -->
                <div class="custom-dropdown mobile-only">
                    <button type="button" class="dropdown-toggle" id="dropdown-toggle">
                        <span id="dropdown-selected">Temperado</span>
                        <span class="dropdown-arrow">‚ñ≤</span>
                    </button>
                    <ul class="dropdown-menu" id="dropdown-menu">
                        <li data-value="temperado" class="selected">Temperado</li>
                        <li data-value="laminado">Laminado</li>
                        <li data-value="fantasia">Fantasia</li>
                        <li data-value="espelho">Espelho</li>
                    </ul>
                </div>
            </div>
            
            <div class="control-group">
                <label for="quality-select">Qualidade:</label>
                <select id="quality-select">
                    <option value="low" selected>üü¢ Baixa (R√°pido)</option>
                    <option value="medium">üü° M√©dia</option>
                    <option value="high">üî¥ Alta (Lento)</option>
                </select>
            </div>
            
            <div class="control-group buttons">
                <button id="btn-break" class="btn-primary">Quebrar</button>
                <button id="btn-reset" class="btn-secondary">Reset</button>
            </div>
            
            <div class="control-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="slow-motion">
                    <span class="checkmark"></span>
                    üê¢ Slow Motion
                </label>
            </div>
            
            <div class="control-group">
                <label for="impact-intensity">Intensidade do Impacto:</label>
                <input type="range" id="impact-intensity" min="0.5" max="2.5" step="0.1" value="1.0">
                <span id="intensity-value">1.0x</span>
            </div>
            
            <!-- Box de Risco -->
            <div id="risk-box" class="risk-safe">
                <div class="risk-header">
                    <span class="risk-icon">‚úÖ</span>
                    <span class="risk-level">SEGURO</span>
                </div>
                <ul class="risk-bullets">
                    <li>Fragmenta em pequenos cubos sem bordas cortantes</li>
                    <li>Recomendado para boxes de banheiro e portas</li>
                </ul>
            </div>
        </div>
        
        <!-- Indicador de Loading -->
        <div id="loading">
            <div class="spinner"></div>
            <p>Carregando simula√ß√£o...</p>
        </div>
        
        <!-- Info de Performance -->
        <div id="perf-info">
            <span id="fps">60 FPS</span>
            <span id="render-mode">REALTIME</span>
        </div>
    </div>
    
    <!-- Importmap para Three.js via CDN -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    
    <script type="module" src="glass3d.js"></script>
    
    <!-- Script para dropdown mobile customizado -->
    <script>
    (function() {
        const toggle = document.getElementById('dropdown-toggle');
        const menu = document.getElementById('dropdown-menu');
        const selected = document.getElementById('dropdown-selected');
        const nativeSelect = document.getElementById('glass-type');
        
        if (!toggle || !menu) return;
        
        // Abre/fecha dropdown
        toggle.addEventListener('click', function(e) {
            e.stopPropagation();
            menu.classList.toggle('open');
        });
        
        // Seleciona op√ß√£o
        menu.querySelectorAll('li').forEach(function(li) {
            li.addEventListener('click', function() {
                const value = this.dataset.value;
                const text = this.textContent;
                
                // Atualiza visual
                selected.textContent = text;
                menu.querySelectorAll('li').forEach(function(item) {
                    item.classList.remove('selected');
                });
                this.classList.add('selected');
                
                // Sincroniza com select nativo
                nativeSelect.value = value;
                nativeSelect.dispatchEvent(new Event('change'));
                
                // Fecha menu
                menu.classList.remove('open');
            });
        });
        
        // Fecha ao clicar fora
        document.addEventListener('click', function() {
            menu.classList.remove('open');
        });
    })();
    </script>
</body>
</html>
